<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>DPPH™ – Ultra Realistic 3D Hydro Bed</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- THREE.JS + Loaders -->
<script src="https://cdn.jsdelivr.net/npm/three@0.155.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.155.0/examples/js/controls/OrbitControls.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.155.0/examples/js/loaders/GLTFLoader.js"></script>

<style>
    body {
        margin: 0;
        overflow: hidden;
        background: #000;
        font-family: Arial;
    }

    #panel {
        position: absolute;
        top: 20px;
        right: 20px;
        width: 260px;
        padding: 20px;
        background: rgba(15, 25, 40, 0.9);
        border-radius: 16px;
        color: #aee1ff;
        box-shadow: 0 0 25px #0af;
        font-size: 14px;
    }

    h2 {
        text-align: center;
        color: #6ec8ff;
        margin-top: 0;
    }

    input[type=range] {
        width: 100%;
    }

    select, button {
        padding: 8px;
        margin-top: 5px;
        width: 100%;
        background: #0d192c;
        border: 1px solid #3f88ff;
        color: #9cd9ff;
        border-radius: 6px;
    }

    button {
        cursor: pointer;
        transition: 0.2s;
    }

    button:hover {
        background: #193a63;
    }

    label {
        font-weight: bold;
        color: #99d4ff;
        font-size: 13px;
    }
</style>
</head>

<body>

<div id="panel">
    <h2>DPPH™ Control Panel</h2>

    <label>Temperature (°C)</label>
    <input id="temp" type="range" min="20" max="60" value="35">

    <label>Pulse Intensity</label>
    <input id="pulse" type="range" min="1" max="10" value="5">

    <label>Treatment Program</label>
    <select id="program">
        <option value="relax">Relaxation Wave</option>
        <option value="deep">Deep Pulse Massage</option>
        <option value="detox">Detox Hydro Wave</option>
    </select>

    <button id="startBtn">▶ Start Session</button>
    <button id="stopBtn">⏹ Stop</button>
</div>

<script>
    // ------------------------------
    //  3D SCENE SETUP
    // ------------------------------
    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0x000000);

    const camera = new THREE.PerspectiveCamera(
        60, window.innerWidth / window.innerHeight, 0.1, 1000
    );
    camera.position.set(4, 2.5, 8);

    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    const controls = new THREE.OrbitControls(camera, renderer.domElement);

    // LIGHTING
    const ambient = new THREE.AmbientLight(0x88ccff, 0.6);
    scene.add(ambient);

    const keyLight = new THREE.SpotLight(0x99ccff, 2);
    keyLight.position.set(5, 10, 5);
    keyLight.castShadow = true;
    scene.add(keyLight);

    // ------------------------------
    //   LOAD REALISTIC 3D BED
    // ------------------------------
    let bed;

    const loader = new THREE.GLTFLoader();
    loader.load("bed.glb", function(gltf) {
        bed = gltf.scene;
        bed.scale.set(1.4, 1.4, 1.4);
        bed.position.set(0, 0, 0);
        scene.add(bed);
    });

    // ------------------------------
    //   INTERNAL WATER CHAMBERS
    // ------------------------------
    const chambers = [];

    for (let i = 0; i < 6; i++) {
        const geo = new THREE.CylinderGeometry(0.3, 0.3, 1, 32);
        const mat = new THREE.MeshStandardMaterial({
            color: 0x22ddff,
            transparent: true,
            opacity: 0.75,
            emissive: 0x1188ff
        });

        const c = new THREE.Mesh(geo, mat);
        c.position.set(-2.5 + i, 0.8, 0);

        scene.add(c);
        chambers.push(c);
    }

    // ------------------------------
    // CONTROL PANEL LOGIC
    // ------------------------------
    let active = false;
    let pulseIntensity = 5;
    let waveSpeed = 0.03;

    document.getElementById("pulse").oninput = function() {
        pulseIntensity = this.value / 10;
    };

    document.getElementById("startBtn").onclick = function() {
        active = true;
    };

    document.getElementById("stopBtn").onclick = function() {
        active = false;
        chambers.forEach(c => c.scale.set(1, 1, 1));
    };

    document.getElementById("program").onchange = function() {
        if (this.value === "relax") waveSpeed = 0.02;
        if (this.value === "deep") waveSpeed = 0.05;
        if (this.value === "detox") waveSpeed = 0.08;
    };

    // ------------------------------
    //   ANIMATION LOOP
    // ------------------------------
    function animate() {
        requestAnimationFrame(animate);

        if (active) {
            const t = Date.now() * waveSpeed;

            chambers.forEach((c, i) => {
                const wave = Math.sin(t + i * 0.6) * pulseIntensity;
                c.scale.y = 1 + wave * 0.3;
                c.scale.x = 1 + wave * 0.15;
            });
        }

        controls.update();
        renderer.render(scene, camera);
    }

    animate();

    window.addEventListener("resize", () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
    });
</script>

</body>
 </html>



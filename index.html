<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>DPPH™ Ultra-Realistic 3D Hydro Bed</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { margin:0; overflow:hidden; background:#000; font-family:Arial; }
#controlPanel{
    position:absolute; top:30px; right:30px; width:320px;
    background:rgba(0,10,30,0.85); padding:20px; border-radius:20px;
    color:#fff; box-shadow:0 0 30px #33aaff; backdrop-filter:blur(10px);
}
label{ font-size:14px; }
input, select{ width:100%; margin-bottom:12px; }
button{ width:48%; padding:10px; border:none; border-radius:12px; font-size:16px; margin-top:8px; }
#start{ background:#00aaff; color:#fff; } #stop{ background:#ff6600; color:#fff; float:right; }
</style>
</head>
<body>

<div id="controlPanel">
<h3>DPPH™ Control Panel</h3>
<label>Temperature (°C)</label>
<input type="range" min="20" max="60" value="35" id="temp">
<label>Pulse Intensity</label>
<input type="range" min="0" max="100" value="40" id="pulse">
<label>Program</label>
<select id="program">
<option>Relaxation</option>
<option>Deep Tissue</option>
<option>Detox</option>
<option>Spinal Therapy</option>
<option>Lymphatic Boost</option>
</select>
<button id="start">Start</button>
<button id="stop">Stop</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.155.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.155.0/examples/js/controls/OrbitControls.js"></script>

<script>
// ----- SCENE, CAMERA, RENDERER -----
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x111111);

const camera = new THREE.PerspectiveCamera(60, window.innerWidth/window.innerHeight, 0.1, 2000);
camera.position.set(0, 60, 180);

const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.shadowMap.enabled = true;
document.body.appendChild(renderer.domElement);

const controls = new THREE.OrbitControls(camera, renderer.domElement);

// ----- LIGHTING -----
const ambient = new THREE.AmbientLight(0x88ccff,0.6);
scene.add(ambient);
const spot = new THREE.SpotLight(0x33aaff,2);
spot.position.set(120,150,100);
spot.castShadow = true;
scene.add(spot);

// ----- ROOM ENVIRONMENT -----
const floor = new THREE.Mesh(
  new THREE.PlaneGeometry(500,500),
  new THREE.MeshStandardMaterial({color:0x222222, roughness:0.8})
);
floor.rotation.x = -Math.PI/2;
floor.position.y = 0;
scene.add(floor);

const wall = new THREE.Mesh(
  new THREE.PlaneGeometry(500,200),
  new THREE.MeshStandardMaterial({color:0x1a1a30, roughness:0.9})
);
wall.position.z = -250;
wall.position.y = 100;
scene.add(wall);

// ----- BED FRAME -----
const frame = new THREE.Mesh(
  new THREE.BoxGeometry(200,20,80),
  new THREE.MeshPhongMaterial({color:0x22252a, shininess:90})
);
frame.position.set(0,10,0);
frame.castShadow = true;
scene.add(frame);

// ----- LED STRIPS -----
function led(x,z){
    const strip = new THREE.Mesh(new THREE.BoxGeometry(200,5,5), 
        new THREE.MeshStandardMaterial({color:0x33aaff, emissive:0x00bbff, emissiveIntensity:2}));
    strip.position.set(x,23,z);
    scene.add(strip);
}
led(0,40);
led(0,-40);

// ----- TRANSPARENT DOME -----
const dome = new THREE.Mesh(
    new THREE.SphereGeometry(95,32,32,0,Math.PI),
    new THREE.MeshPhysicalMaterial({color:0x113355, transparent:true, opacity:0.25, roughness:0.1, metalness:0.3, clearcoat:1})
);
dome.position.set(0,70,0);
scene.add(dome);

// ----- WATER PULSE MATTRESS -----
const mattress = new THREE.Group();
const pulseMaterial = new THREE.MeshPhongMaterial({color:0x1188ff, emissive:0x0044ff, shininess:120});
for(let x=-70;x<=70;x+=35){
    for(let z=-30;z<=30;z+=30){
        const blob = new THREE.Mesh(new THREE.SphereGeometry(18,32,32),pulseMaterial);
        blob.position.set(x,30,z);
        mattress.add(blob);
    }
}
scene.add(mattress);

// ----- TOUCHSCREEN PANEL -----
const panelGeo = new THREE.BoxGeometry(30,20,2);
const panelMat = new THREE.MeshPhongMaterial({color:0x001133, emissive:0x0055ff});
const touchPanel = new THREE.Mesh(panelGeo,panelMat);
touchPanel.position.set(120,30,20);
touchPanel.rotation.y = -0.3;
scene.add(touchPanel);

// ----- HUMAN BODY (simple capsule) -----
const bodyMat = new THREE.MeshPhongMaterial({color:0xffccaa, shininess:40});
const human = new THREE.Mesh(new THREE.CapsuleGeometry(12,60,8,16), bodyMat);
human.position.set(0,50,0);
human.rotation.z = Math.PI/2;
scene.add(human);

// ----- ANIMATIONS -----
let active=false, intensity=0.4, speed=0.03;

document.getElementById("pulse").oninput=e=>intensity=e.target.value/100;
document.getElementById("program").onchange=e=>{
    speed=e.target.value==="Relaxation"?0.02:
          e.target.value==="Deep Tissue"?0.05:
          e.target.value==="Detox"?0.07:
          e.target.value==="Spinal Therapy"?0.09:0.06;
};
document.getElementById("start").onclick=()=>active=true;
document.getElementById("stop").onclick=()=>active=false;

function animate(){
    requestAnimationFrame(animate);
    if(active){
        const t=Date.now()*speed;
        mattress.children.forEach((c,i)=>{
            const w=Math.sin(t+i*0.6)*intensity;
            c.scale.y = 1 + w*0.4;
            c.scale.x = 1 + w*0.2;
        });
    }
    controls.update();
    renderer.render(scene,camera);
}
animate();

window.addEventListener("resize",()=>{
    camera.aspect=window.innerWidth/window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth,window.innerHeight);
});
</script>

</body>
</html>

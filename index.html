<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>DPPH™ Ultra-Realistic Hydro Bed</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- THREE.JS -->
<script src="https://cdn.jsdelivr.net/npm/three@0.155.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.155.0/examples/js/controls/OrbitControls.js"></script>

<style>
    body { margin:0; overflow:hidden; background:#000; font-family:Arial; }
    #panel {
        position:absolute; top:20px; right:20px;
        width:260px; padding:20px;
        background:rgba(10,20,40,0.9);
        border-radius:14px;
        color:#bfe9ff;
        box-shadow:0 0 20px #29aaff;
    }
    h2 { text-align:center; margin:0 0 10px 0; color:#7fd4ff; }
    label { font-size:13px; color:#9dd6ff; font-weight:bold; }
    input[type=range], select, button {
        width:100%; margin-top:6px;
        padding:8px; border-radius:6px;
        background:#0c1a2d; color:#9cd9ff;
        border:1px solid #3fa9ff;
    }
    button:hover { background:#173a5f; cursor:pointer; }
</style>
</head>

<body>

<div id="panel">
    <h2>DPPH™ Control Panel</h2>

    <label>Temperature (°C)</label>
    <input id="temp" type="range" min="20" max="60" value="35">

    <label>Pulse Intensity</label>
    <input id="pulse" type="range" min="1" max="10" value="5">

    <label>Program</label>
    <select id="program">
        <option value="relax">Relaxation</option>
        <option value="deep">Deep Pulse</option>
        <option value="detox">Detox Wave</option>
    </select>

    <button id="startBtn">▶ Start</button>
    <button id="stopBtn">⏹ Stop</button>
</div>

<script>
/* ------------------- SCENE ------------------- */
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x000000);

const camera = new THREE.PerspectiveCamera(
    60, window.innerWidth/window.innerHeight, 0.1, 1000
);
camera.position.set(5, 3, 9);

const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

const controls = new THREE.OrbitControls(camera, renderer.domElement);

/* ------------------- LIGHTS ------------------- */
scene.add(new THREE.AmbientLight(0x88ccff, 0.6));

const spot = new THREE.SpotLight(0xaaccff, 2);
spot.position.set(5, 10, 5);
scene.add(spot);

/* ------------------- BED BODY ------------------- */
const bedBody = new THREE.Mesh(
    new THREE.BoxGeometry(6, 1, 2.6),
    new THREE.MeshStandardMaterial({
        color:0x1a1f26, metalness:0.7, roughness:0.3
    })
);
bedBody.position.y = 0.5;
scene.add(bedBody);

/* ------------------- LED SIDE STRIPS ------------------- */
function ledStrip(z) {
    const strip = new THREE.Mesh(
        new THREE.BoxGeometry(5.8, 0.12, 0.15),
        new THREE.MeshStandardMaterial({
            color:0x33aaff,
            emissive:0x0077ff,
            emissiveIntensity:3
        })
    );
    strip.position.set(0, 0.35, z);
    bedBody.add(strip);
}
ledStrip(1.29);
ledStrip(-1.29);

/* ------------------- ACRYLIC DOME ------------------- */
const domeGeo = new THREE.CylinderGeometry(1.3, 1.3, 6, 32, 1, true);
domeGeo.rotateZ(Math.PI/2);

const dome = new THREE.Mesh(
    domeGeo,
    new THREE.MeshPhysicalMaterial({
        color:0x99ddff, transparent:true, opacity:0.22,
        roughness:0.08, metalness:0.0, clearcoat:1
    })
);
dome.position.set(0, 1.25, 0);
scene.add(dome);

/* ------------------- WATER CHAMBERS ------------------- */
const chambers = [];
for (let i=0; i<6; i++){
    const c = new THREE.Mesh(
        new THREE.CylinderGeometry(0.35, 0.35, 1.1, 32),
        new THREE.MeshStandardMaterial({
            color:0x22ddff, transparent:true, opacity:0.7,
            emissive:0x1188ff, emissiveIntensity:1
        })
    );
    c.rotation.x = Math.PI/2;
    c.position.set(-2.5 + i, 0.95, 0);
    scene.add(c);
    chambers.push(c);
}

/* ------------------- CONTROL PANEL ------------------- */
let active = false;
let intensity = 0.5;
let speed = 0.03;

document.getElementById("pulse").oninput = e => {
    intensity = e.target.value / 10;
};
document.getElementById("program").onchange = e => {
    speed =
        e.target.value === "relax" ? 0.02 :
        e.target.value === "deep"  ? 0.05 : 0.08;
};
document.getElementById("startBtn").onclick = ()=> active=true;
document.getElementById("stopBtn").onclick = ()=> active=false;

/* ------------------- ANIMATION ------------------- */
function animate(){
    requestAnimationFrame(animate);

    if(active){
        const t = Date.now()*speed;
        chambers.forEach((c,i)=>{
            const w = Math.sin(t + i*0.6)*intensity;
            c.scale.y = 1 + w*0.4;
            c.scale.x = 1 + w*0.2;
        });
    }

    controls.update();
    renderer.render(scene,camera);
}
animate();

window.onresize = ()=>{
    camera.aspect = window.innerWidth/window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth,window.innerHeight);
};
</script>

</body>
</html>
